<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 10 Loops | An Introduction to R</title>
  <meta name="description" content="An introduction to R for students on MAS113 and MAS5052" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 10 Loops | An Introduction to R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="An introduction to R for students on MAS113 and MAS5052" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 10 Loops | An Introduction to R" />
  
  <meta name="twitter:description" content="An introduction to R for students on MAS113 and MAS5052" />
  

<meta name="author" content="Jeremy Oakley" />


<meta name="date" content="2022-10-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="monte-carlo-methods.html"/>
<link rel="next" href="computing-accurate-monte-carlo-estimates.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">An introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this tutorial</a></li>
<li class="part"><span><b>I Getting started with R</b></span></li>
<li class="chapter" data-level="1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> R and RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#using-r-on-campus"><i class="fa fa-check"></i><b>1.1</b> Using R on campus</a></li>
<li class="chapter" data-level="1.2" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#using-r-at-home"><i class="fa fa-check"></i><b>1.2</b> Using R at home</a></li>
<li class="chapter" data-level="1.3" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#the-rstudio-interface"><i class="fa fa-check"></i><b>1.3</b> The RStudio interface</a></li>
<li class="chapter" data-level="1.4" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#inputs-and-outputs"><i class="fa fa-check"></i><b>1.4</b> Inputs and outputs</a></li>
<li class="chapter" data-level="1.5" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#get-comfortable"><i class="fa fa-check"></i><b>1.5</b> Get comfortable!</a></li>
<li class="chapter" data-level="1.6" data-path="r-and-rstudio.html"><a href="r-and-rstudio.html#change-your-workspace-settings"><i class="fa fa-check"></i><b>1.6</b> Change your Workspace settings</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="using-r-as-a-calculator.html"><a href="using-r-as-a-calculator.html"><i class="fa fa-check"></i><b>2</b> Using R as a calculator</a>
<ul>
<li class="chapter" data-level="2.1" data-path="using-r-as-a-calculator.html"><a href="using-r-as-a-calculator.html#scientific-notation"><i class="fa fa-check"></i><b>2.1</b> Scientific notation</a></li>
<li class="chapter" data-level="2.2" data-path="using-r-as-a-calculator.html"><a href="using-r-as-a-calculator.html#order-of-operations"><i class="fa fa-check"></i><b>2.2</b> Order of operations</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html"><i class="fa fa-check"></i><b>3</b> Variables and vectors</a>
<ul>
<li class="chapter" data-level="3.1" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#vectors"><i class="fa fa-check"></i><b>3.1</b> Vectors</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#sequences-of-integers"><i class="fa fa-check"></i><b>3.1.1</b> Sequences of integers</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#testing-for-equality-and-inequalties"><i class="fa fa-check"></i><b>3.2</b> Testing for equality and inequalties</a></li>
<li class="chapter" data-level="3.3" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#subsetting-vectors"><i class="fa fa-check"></i><b>3.3</b> Subsetting vectors</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#logical-subsetting"><i class="fa fa-check"></i><b>3.3.1</b> Logical subsetting</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#character-strings"><i class="fa fa-check"></i><b>3.4</b> Character strings</a></li>
<li class="chapter" data-level="3.5" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#factors"><i class="fa fa-check"></i><b>3.5</b> Factors</a></li>
<li class="chapter" data-level="3.6" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#the-environment-window"><i class="fa fa-check"></i><b>3.6</b> The Environment window</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>4</b> Functions</a>
<ul>
<li class="chapter" data-level="4.1" data-path="functions.html"><a href="functions.html#introducing-functions"><i class="fa fa-check"></i><b>4.1</b> Introducing functions</a></li>
<li class="chapter" data-level="4.2" data-path="functions.html"><a href="functions.html#arguments"><i class="fa fa-check"></i><b>4.2</b> Arguments</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="functions.html"><a href="functions.html#experiment"><i class="fa fa-check"></i><b>4.2.1</b> Experiment!</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="functions.html"><a href="functions.html#help-files"><i class="fa fa-check"></i><b>4.3</b> Help files</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>5</b> Packages</a>
<ul>
<li class="chapter" data-level="5.1" data-path="packages.html"><a href="packages.html#installing-a-package"><i class="fa fa-check"></i><b>5.1</b> Installing a package</a></li>
<li class="chapter" data-level="5.2" data-path="packages.html"><a href="packages.html#updating-packages"><i class="fa fa-check"></i><b>5.2</b> Updating packages</a></li>
<li class="chapter" data-level="5.3" data-path="packages.html"><a href="packages.html#using-packages"><i class="fa fa-check"></i><b>5.3</b> Using packages</a></li>
<li class="chapter" data-level="5.4" data-path="packages.html"><a href="packages.html#is-there-a-package-for"><i class="fa fa-check"></i><b>5.4</b> Is there a package for…?</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-frames-tibbles-and-lists.html"><a href="data-frames-tibbles-and-lists.html"><i class="fa fa-check"></i><b>6</b> Data frames, tibbles and lists</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-frames-tibbles-and-lists.html"><a href="data-frames-tibbles-and-lists.html#data-frames"><i class="fa fa-check"></i><b>6.1</b> Data frames</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="data-frames-tibbles-and-lists.html"><a href="data-frames-tibbles-and-lists.html#making-data-frames"><i class="fa fa-check"></i><b>6.1.1</b> Making data frames</a></li>
<li class="chapter" data-level="6.1.2" data-path="data-frames-tibbles-and-lists.html"><a href="data-frames-tibbles-and-lists.html#extracting-rows-and-columns"><i class="fa fa-check"></i><b>6.1.2</b> Extracting rows and columns</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="data-frames-tibbles-and-lists.html"><a href="data-frames-tibbles-and-lists.html#tibbles"><i class="fa fa-check"></i><b>6.2</b> tibbles</a></li>
<li class="chapter" data-level="6.3" data-path="data-frames-tibbles-and-lists.html"><a href="data-frames-tibbles-and-lists.html#inspecting-large-data-frames-and-tibbles"><i class="fa fa-check"></i><b>6.3</b> Inspecting large data frames and tibbles</a></li>
<li class="chapter" data-level="6.4" data-path="data-frames-tibbles-and-lists.html"><a href="data-frames-tibbles-and-lists.html#lists"><i class="fa fa-check"></i><b>6.4</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="scripts.html"><a href="scripts.html"><i class="fa fa-check"></i><b>7</b> Scripts</a>
<ul>
<li class="chapter" data-level="7.1" data-path="scripts.html"><a href="scripts.html#creating-a-new-script"><i class="fa fa-check"></i><b>7.1</b> Creating a new script</a></li>
<li class="chapter" data-level="7.2" data-path="scripts.html"><a href="scripts.html#entering-and-running-commands"><i class="fa fa-check"></i><b>7.2</b> Entering and running commands</a></li>
<li class="chapter" data-level="7.3" data-path="scripts.html"><a href="scripts.html#adding-comments-and-sections-in-scripts"><i class="fa fa-check"></i><b>7.3</b> Adding comments and sections in scripts</a></li>
<li class="chapter" data-level="7.4" data-path="scripts.html"><a href="scripts.html#line-breaks-in-scripts"><i class="fa fa-check"></i><b>7.4</b> Line breaks in scripts</a></li>
<li class="chapter" data-level="7.5" data-path="scripts.html"><a href="scripts.html#saving-a-script"><i class="fa fa-check"></i><b>7.5</b> Saving a script</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="a-tip-for-understanding-r-code.html"><a href="a-tip-for-understanding-r-code.html"><i class="fa fa-check"></i><b>8</b> A tip for understanding R code</a></li>
<li class="part"><span><b>II Example: the birthday problem</b></span></li>
<li class="chapter" data-level="9" data-path="monte-carlo-methods.html"><a href="monte-carlo-methods.html"><i class="fa fa-check"></i><b>9</b> Monte Carlo methods</a>
<ul>
<li class="chapter" data-level="9.1" data-path="monte-carlo-methods.html"><a href="monte-carlo-methods.html#the-origins-of-monte-carlo"><i class="fa fa-check"></i><b>9.1</b> The origins of Monte Carlo</a></li>
<li class="chapter" data-level="9.2" data-path="monte-carlo-methods.html"><a href="monte-carlo-methods.html#the-birthday-problem"><i class="fa fa-check"></i><b>9.2</b> The birthday problem</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>10</b> Loops</a>
<ul>
<li class="chapter" data-level="10.1" data-path="loops.html"><a href="loops.html#pre-assigning"><i class="fa fa-check"></i><b>10.1</b> Pre-assigning</a></li>
<li class="chapter" data-level="10.2" data-path="loops.html"><a href="loops.html#looping-by-hand"><i class="fa fa-check"></i><b>10.2</b> ‘looping’ by hand</a></li>
<li class="chapter" data-level="10.3" data-path="loops.html"><a href="loops.html#for-loops"><i class="fa fa-check"></i><b>10.3</b> for loops</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="computing-accurate-monte-carlo-estimates.html"><a href="computing-accurate-monte-carlo-estimates.html"><i class="fa fa-check"></i><b>11</b> Computing accurate Monte Carlo estimates</a>
<ul>
<li class="chapter" data-level="11.1" data-path="computing-accurate-monte-carlo-estimates.html"><a href="computing-accurate-monte-carlo-estimates.html#using-the-mean-command"><i class="fa fa-check"></i><b>11.1</b> Using the <code>mean()</code> command</a></li>
<li class="chapter" data-level="11.2" data-path="computing-accurate-monte-carlo-estimates.html"><a href="computing-accurate-monte-carlo-estimates.html#improving-the-accuracy-of-the-estimate"><i class="fa fa-check"></i><b>11.2</b> Improving the accuracy of the estimate</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="an-analytical-solution.html"><a href="an-analytical-solution.html"><i class="fa fa-check"></i><b>12</b> An analytical solution</a>
<ul>
<li class="chapter" data-level="12.1" data-path="an-analytical-solution.html"><a href="an-analytical-solution.html#total-number-of-possibilities"><i class="fa fa-check"></i><b>12.1</b> Total number of possibilities</a></li>
<li class="chapter" data-level="12.2" data-path="an-analytical-solution.html"><a href="an-analytical-solution.html#number-of-possibilities-where-all-birthdays-are-different"><i class="fa fa-check"></i><b>12.2</b> Number of possibilities where all birthdays are different</a></li>
</ul></li>
<li class="part"><span><b>III Report writing with R Markdown</b></span></li>
<li class="chapter" data-level="13" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>13</b> R Markdown</a>
<ul>
<li class="chapter" data-level="13.1" data-path="r-markdown.html"><a href="r-markdown.html#making-html-and-pdf-documents"><i class="fa fa-check"></i><b>13.1</b> Making html and PDF documents</a></li>
<li class="chapter" data-level="13.2" data-path="r-markdown.html"><a href="r-markdown.html#a-five-minute-video-tutorial"><i class="fa fa-check"></i><b>13.2</b> A five minute video tutorial</a></li>
<li class="chapter" data-level="13.3" data-path="r-markdown.html"><a href="r-markdown.html#code-chunk-options"><i class="fa fa-check"></i><b>13.3</b> Code chunk options</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="r-markdown.html"><a href="r-markdown.html#code-chunk-options-for-figures"><i class="fa fa-check"></i><b>13.3.1</b> Code chunk options for figures</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="r-markdown.html"><a href="r-markdown.html#spell-checking"><i class="fa fa-check"></i><b>13.4</b> Spell checking</a></li>
</ul></li>
<li class="part"><span><b>IV Miscelleanous</b></span></li>
<li class="chapter" data-level="14" data-path="rstudio-projects.html"><a href="rstudio-projects.html"><i class="fa fa-check"></i><b>14</b> RStudio Projects</a>
<ul>
<li class="chapter" data-level="14.1" data-path="rstudio-projects.html"><a href="rstudio-projects.html#file-paths-and-working-directories"><i class="fa fa-check"></i><b>14.1</b> File paths and working directories</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="rstudio-projects.html"><a href="rstudio-projects.html#working-directories-for-r-markdown-documents"><i class="fa fa-check"></i><b>14.1.1</b> Working directories for R Markdown documents</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="rstudio-projects.html"><a href="rstudio-projects.html#creating-a-new-project"><i class="fa fa-check"></i><b>14.2</b> Creating a new project</a></li>
<li class="chapter" data-level="14.3" data-path="rstudio-projects.html"><a href="rstudio-projects.html#opening-an-existing-project"><i class="fa fa-check"></i><b>14.3</b> Opening an existing project</a></li>
<li class="chapter" data-level="14.4" data-path="rstudio-projects.html"><a href="rstudio-projects.html#using-your-project-folder"><i class="fa fa-check"></i><b>14.4</b> Using your project folder</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="more-on-r-markdown.html"><a href="more-on-r-markdown.html"><i class="fa fa-check"></i><b>15</b> More on R Markdown</a>
<ul>
<li class="chapter" data-level="15.1" data-path="more-on-r-markdown.html"><a href="more-on-r-markdown.html#tables"><i class="fa fa-check"></i><b>15.1</b> Tables</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="more-on-r-markdown.html"><a href="more-on-r-markdown.html#using-markdown"><i class="fa fa-check"></i><b>15.1.1</b> Using Markdown</a></li>
<li class="chapter" data-level="15.1.2" data-path="more-on-r-markdown.html"><a href="more-on-r-markdown.html#using-knitrkable"><i class="fa fa-check"></i><b>15.1.2</b> Using <code>knitr::kable()</code></a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="more-on-r-markdown.html"><a href="more-on-r-markdown.html#caching-results-for-slow-running-code"><i class="fa fa-check"></i><b>15.2</b> Caching results for slow-running code</a></li>
<li class="chapter" data-level="15.3" data-path="more-on-r-markdown.html"><a href="more-on-r-markdown.html#r-markdown-for-latex-users"><i class="fa fa-check"></i><b>15.3</b> R Markdown for LaTeX users</a></li>
<li class="chapter" data-level="15.4" data-path="more-on-r-markdown.html"><a href="more-on-r-markdown.html#the-yaml-header"><i class="fa fa-check"></i><b>15.4</b> The YAML header</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="loops" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">Section 10</span> Loops<a href="loops.html#loops" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this section, we will use the Monte Carlo method to solve the birthday problem, introducing one more programming concept: the ‘for loop’.</p>
<div id="pre-assigning" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Pre-assigning<a href="loops.html#pre-assigning" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We need to simulate lots of separate sets of 20 birthdays. To keep things simple and easy to visualise, we’ll first simulate five sets of 20 birthdays, then do more later.</p>
<p>We will simulate one set of 20 birthdays at a time, and record the number of unique birthdays. It can be helpful to ‘pre-assign’ a vector, so that we’ve got somewhere convenient to store the results as they come in.</p>
<p>We’ll make a vector called <code>numberUnique</code>, that initially just consists of five zeros. We can use the <code>rep()</code> command to replicate 0 five times:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="loops.html#cb97-1" aria-hidden="true" tabindex="-1"></a>numberUnique <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, <span class="at">times =</span> <span class="dv">5</span>)</span></code></pre></div>
<p>and to see what the result is:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="loops.html#cb98-1" aria-hidden="true" tabindex="-1"></a>numberUnique</span></code></pre></div>
<pre><code>## [1] 0 0 0 0 0</code></pre>
<p>The zeros will all be replaced as we work through the simulation, so the values in <code>numberUnique</code> aren’t important right now: what matters is that we have a vector with five places, ready to store the results. (An analogy would be that this is a bit like, having been told we’re going to be given five books, we first clear an empty space for five books on a bookshelf. We’ve then got somewhere ready to put the books as we get them.)</p>
</div>
<div id="looping-by-hand" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> ‘looping’ by hand<a href="loops.html#looping-by-hand" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A slow and tedious way to do the five simulations would be as follows. We simulate the first set of 20 birthdays, count how many unique birthdays there are, and store the result in element <code>1</code> of <code>numberUnique</code>:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="loops.html#cb100-1" aria-hidden="true" tabindex="-1"></a>birthdays <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">365</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb100-2"><a href="loops.html#cb100-2" aria-hidden="true" tabindex="-1"></a>numberUnique[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(birthdays))</span></code></pre></div>
<p>so that the first element of <code>numberUnique</code> has been updated:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="loops.html#cb101-1" aria-hidden="true" tabindex="-1"></a>numberUnique</span></code></pre></div>
<pre><code>## [1] 19  0  0  0  0</code></pre>
<p>(We’ll have a quick look at <code>birthdays</code>, to see why the first element is 19)</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="loops.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(birthdays)</span></code></pre></div>
<pre><code>##  [1]  48  62  71  75  84 102 130 152 172 176 186 235 245 255 259 291 307 307 312
## [20] 365</code></pre>
<p>(There are 19 unique birthdays: two people had birthdays on day number 307.)</p>
<p>Then we simulate the second set of 20 birthdays, count how many unique birthdays there are, and store the result in element <code>2</code> of <code>numberUnique</code>:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="loops.html#cb105-1" aria-hidden="true" tabindex="-1"></a>birthdays <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">365</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb105-2"><a href="loops.html#cb105-2" aria-hidden="true" tabindex="-1"></a>numberUnique[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(birthdays))</span></code></pre></div>
<p>Note that <code>sample()</code> produces a different result each time, so we’ll have different values in <code>birthdays</code>:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="loops.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(birthdays)</span></code></pre></div>
<pre><code>##  [1]  54  65  76  80 126 126 150 152 180 197 203 246 288 300 303 304 315 316 320
## [20] 357</code></pre>
<p>Now the second element of <code>numberUnique</code> has been updated:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="loops.html#cb108-1" aria-hidden="true" tabindex="-1"></a>numberUnique</span></code></pre></div>
<pre><code>## [1] 19 19  0  0  0</code></pre>
<p>and we keep going…</p>
<p>But to do lots of simulations, this would take ages!</p>
<div class="task">
<div class="exercise">
<p><span id="exr:unlabeled-div-7" class="exercise"><strong>Exercise 10.1  </strong></span>In a script file, first pre-assign <code>numberUnique</code> to be a vector of 5 zeros. Then copy these two lines into your script, pasting them five times:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="loops.html#cb110-1" aria-hidden="true" tabindex="-1"></a>birthdays <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">365</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb110-2"><a href="loops.html#cb110-2" aria-hidden="true" tabindex="-1"></a>numberUnique[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(birthdays))</span></code></pre></div>
<p>Change the numbers in the square brackets <code>[]</code> as appropriate: your goal is to do five simulations, and replace the 5 zeros in <code>numberUnique</code> with the results from the five simulations. Run your script and look at the values in <code>numberUnique</code>, to see that your script has worked.</p>
</div>
</div>
</div>
<div id="for-loops" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> for loops<a href="loops.html#for-loops" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A more convenient way to tell R to do the five (or many more) simulations is to use what we call a <strong>for loop</strong>:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="loops.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb111-2"><a href="loops.html#cb111-2" aria-hidden="true" tabindex="-1"></a>  birthdays <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">365</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb111-3"><a href="loops.html#cb111-3" aria-hidden="true" tabindex="-1"></a>  numberUnique[i] <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(birthdays))</span>
<span id="cb111-4"><a href="loops.html#cb111-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This is the same (but more concise) as writing out the following:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="loops.html#cb112-1" aria-hidden="true" tabindex="-1"></a>  birthdays <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">365</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-2"><a href="loops.html#cb112-2" aria-hidden="true" tabindex="-1"></a>  numberUnique[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(birthdays))</span>
<span id="cb112-3"><a href="loops.html#cb112-3" aria-hidden="true" tabindex="-1"></a>  birthdays <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">365</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-4"><a href="loops.html#cb112-4" aria-hidden="true" tabindex="-1"></a>  numberUnique[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(birthdays))</span>
<span id="cb112-5"><a href="loops.html#cb112-5" aria-hidden="true" tabindex="-1"></a>  birthdays <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">365</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-6"><a href="loops.html#cb112-6" aria-hidden="true" tabindex="-1"></a>  numberUnique[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(birthdays))</span>
<span id="cb112-7"><a href="loops.html#cb112-7" aria-hidden="true" tabindex="-1"></a>  birthdays <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">365</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-8"><a href="loops.html#cb112-8" aria-hidden="true" tabindex="-1"></a>  numberUnique[<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(birthdays))</span>
<span id="cb112-9"><a href="loops.html#cb112-9" aria-hidden="true" tabindex="-1"></a>  birthdays <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">365</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb112-10"><a href="loops.html#cb112-10" aria-hidden="true" tabindex="-1"></a>  numberUnique[<span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unique</span>(birthdays))</span></code></pre></div>
<p>Comparing the two, we can see that in the for loop, the commands inside the brackets <code>{ }</code> have been repeated five times, but with the value of <code>i</code> within <code>[i]</code> cycling through the integers 1, 2, 3, 4, 5. R will cycle <code>i</code> through these five values, because as the start of the for loop, we wrote <code>i = 1:5</code>, and <code>1:5</code> produces these five integers.</p>
<p><img src="images/forLoop.png" width="542" style="display: block; margin: auto;" /></p>
<p>The ‘looping’ variable <code>i</code> can also be within calculations. Here’s a simple example. This loop will do four ‘iterations’, so we will first pre-assign a vector with four zeros to store the results:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="loops.html#cb113-1" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, <span class="at">times =</span> <span class="dv">4</span>)</span></code></pre></div>
<p>Then this for loop:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="loops.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>){</span>
<span id="cb114-2"><a href="loops.html#cb114-2" aria-hidden="true" tabindex="-1"></a>  results[i] <span class="ot">&lt;-</span> i <span class="sc">^</span> (i <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb114-3"><a href="loops.html#cb114-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>would be equivalent to writing out</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="loops.html#cb115-1" aria-hidden="true" tabindex="-1"></a>results[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">^</span> (<span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb115-2"><a href="loops.html#cb115-2" aria-hidden="true" tabindex="-1"></a>results[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">^</span> (<span class="dv">2</span> <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb115-3"><a href="loops.html#cb115-3" aria-hidden="true" tabindex="-1"></a>results[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">^</span> (<span class="dv">3</span> <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb115-4"><a href="loops.html#cb115-4" aria-hidden="true" tabindex="-1"></a>results[<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="dv">4</span> <span class="sc">^</span> (<span class="dv">4</span> <span class="sc">+</span> <span class="dv">1</span>)</span></code></pre></div>
<div class="task">
<div class="exercise">
<p><span id="exr:unlabeled-div-8" class="exercise"><strong>Exercise 10.2  </strong></span>Using for loops.</p>
<ol style="list-style-type: decimal">
<li><p>Modify the birthday problem for loop shown above to do 10 simulations rather than 5. Make sure you ‘pre-assign’ <code>numberUnique</code> first, to be a vector of 10 zeros. Inspect the results in <code>numberUnique</code>, after you have run your loop.</p></li>
<li><p>First, copy and paste these commands into a script file, then run them and inspect <code>reciprocals</code> to see the result</p></li>
</ol>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="loops.html#cb116-1" aria-hidden="true" tabindex="-1"></a>reciprocals <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">3</span>)</span>
<span id="cb116-2"><a href="loops.html#cb116-2" aria-hidden="true" tabindex="-1"></a>reciprocals[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">/</span> <span class="dv">1</span></span>
<span id="cb116-3"><a href="loops.html#cb116-3" aria-hidden="true" tabindex="-1"></a>reciprocals[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb116-4"><a href="loops.html#cb116-4" aria-hidden="true" tabindex="-1"></a>reciprocals[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">/</span> <span class="dv">3</span></span></code></pre></div>
<p>Now write a for loop that produces the same result.</p>
<ol start="3" style="list-style-type: decimal">
<li>All the calculations we’ve done using for loops can actually be done even more efficiently another way, but we won’t worry about this for now. for loops are really designed for problems when the results at one iteration will depend on results from previous iterations, as in the following example. Can you predict which famous sequence the following code would produce? Copy and paste the code into R to find out.</li>
</ol>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="loops.html#cb117-1" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>, <span class="at">times =</span> <span class="dv">10</span>)</span>
<span id="cb117-2"><a href="loops.html#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb117-3"><a href="loops.html#cb117-3" aria-hidden="true" tabindex="-1"></a>  results[i] <span class="ot">&lt;-</span> results[i<span class="dv">-1</span>] <span class="sc">+</span> results[i<span class="dv">-2</span>]</span>
<span id="cb117-4"><a href="loops.html#cb117-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>(Why did we use <code>i in 3:10</code> and not <code>i in 1:10</code>?)</p>
</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="monte-carlo-methods.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="computing-accurate-monte-carlo-estimates.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
